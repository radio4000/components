<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" href="data:;base64,iVBORw0KGgo=" />
		<title>r4-share</title>
		<meta name="description" content="r4-share" />
		<script type="module" src="/src/index.js"></script>
	</head>

	<body>
		<menu>
			<li>Use the "origin" attribute to create the correct "share links"</li>
			<li>
				Use the <a href="?slug=">"slug"</a> and <a href="?track-id=">"track-id"</a> attributes (also as query parameters
				on this page) to share a specific channel (by its slug), or track (by its ID and channel slug)
			</li>
			<li>
				Use the "api-origin" and "icon-origin" attributes to precise where the "iframe" and "icon image link" point to.
			</li>
		</menu>
		<r4-share></r4-share>

		<script>
			/* use the query parameters (and attributes):
				 - `slug` → `?slug={channel_slug}`
				 - `track-id` → `?track-id={track_id}`
			 */
			const params = new URLSearchParams(window.location.search)
			const slug = params.get('slug')
			const trackId = params.get('track-id')

			const $shares = document.querySelectorAll('r4-share')
			$shares.forEach(($share) => {
				/* replace URL pattern for where the channel `slug`,
					 should be inserted in the final sharing links */
				$share.setAttribute('origin', window.location.origin + '/examples/r4-app/{{slug}}')
				if (slug) {
					$share.setAttribute('slug', slug)
				}
				if (trackId) {
					$share.setAttribute('track-id', trackId)
				}
			})
		</script>
	</body>
</html>
